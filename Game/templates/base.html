<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{{title}}</title>
	  <link rel="icon" href="{{ url_for('static', filename='favicon.ico')}}" type="image/x-icon" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Externe CSS-Datei einbinden -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    <!--<link rel="stylesheet" href="{{ url_for('static', filename='styles-kp2.css') }}" />-->

  </head>

  <script>
      function tempAlert(msg,duration) {
          if (msg.length === 0) {
              console.log("No notification to display")
              return;
          }

          var el = document.createElement("div");
          el.setAttribute("style","position:absolute;top:10px;left:10px;background-color:#00C1D4;padding:5px;border-radius:5px;font-size:2vw;");
          el.innerHTML = msg;
          setTimeout(function(){
              el.parentNode.removeChild(el);
          },duration);
          document.body.appendChild(el);
      }

      let camera_address = "{{ camera_address }}";
  </script>

  <body>
    <script src="{{ url_for('static', filename='sender.js')}}"></script>
    <script src="{{ url_for('static', filename='gamemode_controller.js') }}"></script>

    <header>
      <a href="/"><i class="fa-solid fa-house" id="home-button"></i></a>
      <div class="logo">
        <img src=" {{ url_for('static', filename='inst_logo.svg') }}" alt="ISEM Logo" />
      </div>
      &ensp; <!-- fixed empty space -->
      <h1>{{title}}</h1>
    </header>

    <div id="left-column">
      <section id="interface-camera" class="col">
        <div class="image-container" id="livestream-container">
          <!--<img src="http://127.0.0.1:5002/website/video_feed", id="livestream">-->
          <!--<img src="http://134.28.20.53:5000/website/video_feed" id="livestream">-->
          <img src="{{camera_address_video_feed}}" id="livestream">
          <!--<img src=" {{url_for('static', filename='image-90.png')}} " id="livestream">-->
          <img class="ball" id="ball-1" src="{{ url_for('/general/ballimagenumber') }}?n=1">
          <img class="ball" id="ball-2" src="{{ url_for('/general/ballimagenumber') }}?n=2">
          <img class="ball" id="ball-3" src="{{ url_for('/general/ballimagenumber') }}?n=3">
          <img class="ball" id="ball-4" src="{{ url_for('/general/ballimagenumber') }}?n=4">
          <img class="ball" id="ball-5" src="{{ url_for('/general/ballimagenumber') }}?n=5">
          <img class="ball" id="ball-6" src="{{ url_for('/general/ballimagenumber') }}?n=6">
          <img class="ball" id="ball-7" src="{{ url_for('/general/ballimagenumber') }}?n=7">
          <img class="ball" id="ball-eight" src="{{ url_for('/general/ballimagenumber') }}?n=8">
          <img class="ball" id="ball-9" src="{{ url_for('/general/ballimagenumber') }}?n=9">
          <img class="ball" id="ball-10" src="{{ url_for('/general/ballimagenumber') }}?n=10">
          <img class="ball" id="ball-11" src="{{ url_for('/general/ballimagenumber') }}?n=11">
          <img class="ball" id="ball-12" src="{{ url_for('/general/ballimagenumber') }}?n=12">
          <img class="ball" id="ball-13" src="{{ url_for('/general/ballimagenumber') }}?n=13">
          <img class="ball" id="ball-14" src="{{ url_for('/general/ballimagenumber') }}?n=14">
          <img class="ball" id="ball-15" src="{{ url_for('/general/ballimagenumber') }}?n=15">
          <img class="ball" id="ball-white" src="{{ url_for('/general/ballimagenumber') }}?n=16">

          <i class="ball fas fa-flag" id="marker-start"></i>

        </div>
        <div class="button-list">
          <input type="checkbox" id="manipulation-flag" value="off">
          <label for="manipulation-flag">Manual entries</label>


        </div>
        <details>
          <summary>Place balls</summary>
          
          <div id="ball-selector">
            <label class="active"><input type="radio" name="current_ball" value="ball-1" checked>1: Gelb</label>
            <label><input type="radio" name="current_ball" value="ball-2">2: Blau</label>
            <label><input type="radio" name="current_ball" value="ball-3">3: Rot</label>
            <label><input type="radio" name="current_ball" value="ball-4">4: Lila</label>
            <label><input type="radio" name="current_ball" value="ball-5">5: Orange</label>
            <label><input type="radio" name="current_ball" value="ball-6">6:Grün</label>
            <label><input type="radio" name="current_ball" value="ball-7">7: Karmin</label>
            <label><input type="radio" name="current_ball" value="ball-eight">8: Schwarz</label>
            <label><input type="radio" name="current_ball" value="ball-9">9: Halb Gelb</label>
            <label><input type="radio" name="current_ball" value="ball-10">10: Halb Blau</label>
            <label><input type="radio" name="current_ball" value="ball-11">11: Halb Rot</label>
            <label><input type="radio" name="current_ball" value="ball-12">12:Halb Lila</label>
            <label><input type="radio" name="current_ball" value="ball-13">13: Halb Orange</label>
            <label><input type="radio" name="current_ball" value="ball-14">14: Halb Grün</label>
            <label><input type="radio" name="current_ball" value="ball-15">15: Halb Karmin</label>
            <label><input type="radio" name="current_ball" value="ball-white">Weiß</label>
          </div>

          <!--<input type="button" value="Save image for AI training" id="ai-training-button">-->
        </details>
        <details>
          <summary>Debugging</summary>

          Camera controls:
          <div class="button-list">
            <input type="button" id="reload-livestream" value="Reload livestream">
            <input type="button" id="stop-livestream" value="Stop livestream">
            <input type="button" id="toggle-inference" value="Activate live inference">
            <input type="button" onclick="fetch(camera_address + '/meta/relaunch')" value="Restart camera (approx. 15s)">
          </div>
          <br>
          After restarting the camera, reload the livestream until it works. The state of "Activate live inference" can be inverted when it is active and the page gets reloaded.

        </details>
      </section>

      <section id="scoreboard" class="col">
        <fieldset id="single">
          <legend>Scoreboard</legend>
          <div id="table-single" class="table-div">
            Individual
            <table>
              <thead>
                <tr><th></th>
                  {% for column in single_columns %}
                  <th>{{ column }}</th>
                  {% endfor %}
                </tr>
              </thead>
              <tbody>
                {% for entry in single_table %}
                <tr>
                  {% for e in entry %}
                  <td>{{ e }}</td>
                  {% endfor %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div id="table-team" class="table-div">
            Teams
            <table>
              <thead>
                <tr><th></th><th>Team</th><th>Average Score</th></tr>
              </thead>
              <tbody>
                {% for entry in team_table %}
                <tr><td>{{ entry[1] }}</td><td>{{ entry[0] }}</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </fieldset>
      </section>
    </div>

    <div id="right-column">
    {% block content %}

    {% endblock %}
    </div>

    <!-- Audio files -->
    <div style="display: none;" id="sounds">
        <audio name="sound-0" data-group="0"><source src="{{ url_for('static', filename='sounds/perfect1.mp3') }}"></audio>
        <audio name="sound-1" data-group="0"><source src="{{ url_for('static', filename='sounds/very good.mp3') }}"></audio>
        <audio name="sound-2" data-group="0"><source src="{{ url_for('static', filename='sounds/very good (2).mp3') }}"></audio>

        <audio name="sound-3" data-group="1"><source src="{{ url_for('static', filename='sounds/good2.mp3') }}"></audio>

        <audio name="sound-4" data-group="2"><source src="{{ url_for('static', filename='sounds/medium.mp3') }}"></audio>
        <audio name="sound-5" data-group="2"><source src="{{ url_for('static', filename='sounds/medium (6).mp3') }}"></audio>
        <audio name="sound-6" data-group="2"><source src="{{ url_for('static', filename='sounds/medium (5).mp3') }}"></audio>
        <audio name="sound-7" data-group="2"><source src="{{ url_for('static', filename='sounds/medium (4).mp3') }}"></audio>
        <audio name="sound-8" data-group="2"><source src="{{ url_for('static', filename='sounds/medium (2).mp3') }}"></audio>

        <audio name="sound-9" data-group="3"><source src="{{ url_for('static', filename='sounds/bad1.mp3') }}"></audio>
        <audio name="sound-10" data-group="3"><source src="{{ url_for('static', filename='sounds/bad2.mp3') }}"></audio>
        <audio name="sound-11" data-group="3"><source src="{{ url_for('static', filename='sounds/bad3.mp3') }}"></audio>
        <audio name="sound-12" data-group="3"><source src="{{ url_for('static', filename='sounds/bad4.mp3') }}"></audio>
        <audio name="sound-13" data-group="3"><source src="{{ url_for('static', filename='sounds/bad5.mp3') }}"></audio>
        <audio name="sound-14" data-group="3"><source src="{{ url_for('static', filename='sounds/bad6.mp3') }}"></audio>
        <audio name="sound-15" data-group="3"><source src="{{ url_for('static', filename='sounds/bad.mp3') }}"></audio>
        <audio name="sound-16" data-group="3"><source src="{{ url_for('static', filename='sounds/bad 2.mp3') }}"></audio>
        <audio name="sound-17" data-group="3"><source src="{{ url_for('static', filename='sounds/bad (2).mp3') }}"></audio>
        <audio name="sound-18" data-group="3"><source src="{{ url_for('static', filename='sounds/bad (3).mp3') }}"></audio>

        <audio name="sound-19" data-group="4"><source src="{{ url_for('static', filename='sounds/very bad.mp3') }}"></audio>
        <audio name="sound-20" data-group="4"><source src="{{ url_for('static', filename='sounds/very bad 2.mp3') }}"></audio>
        <audio name="sound-21" data-group="4"><source src="{{ url_for('static', filename='sounds/very bad (2).mp3') }}"></audio>
    </div>

    <!--<footer>
      <div class="content-wrapper">
        <p>
          <a href="https://www.linkedin.com/company/tuhh-isem" target="_blank">ISEM auf LinkedIn</a> |
          <a href="https://isem-karriere.de/datenschutz/" target="_blank">Datenschutz</a> |
          <a href="https://www.tuhh.de/isem/impressum" target="_blank">Impressum</a> |
          <a href="http://134.28.20.52:5000/debug/restartgui" target="_blank">Restart Beamer</a> |
          <a href="http://134.28.20.58:5000/meta/relaunch" target="_blank">Restart Camera</a> | 
          <a href="{{ url_for('download') }}" target="_blank">Downloads</a>
        </p>
      </div>
    </footer>-->

    <!-- JavaScript einbinden -->
    <script src="{{ url_for('static', filename='sound.js') }}"></script> 
    <script src="{{ url_for('static', filename='coords-handler.js') }}"></script>
    <script src="{{ url_for('static', filename='history_handler.js') }}"></script>
    <script src="{{ url_for('static', filename='update_gamemode.js') }}"></script>
    <script src="{{ url_for('static', filename='gamemode_retro.js') }}"></script>
    <script src="{{ url_for('static', filename='game_configuration.js') }}"></script>
    <script>
      // Local script, gets set on rendering the page
      tempAlert("{{ notification }}", 4000)
    </script>
  </body>
</html>
